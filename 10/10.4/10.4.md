# 10.4. Flujo de Operaciones

## Módulo 2 - 'Equipo'
1. **Inicio**
2. **Mostrar todos los pedidos asociados a equipos**
   - Obtener todos los pedidos
   - Mostrar los detalles de cada pedido 
3. **Analista selecciona un pedido**
   - El analista revisa el pedido y sus equipos asociados
4. **Actualización del estado del pedido**
   - El analista actualiza el estado del pedido (por ejemplo, "Aceptado" o "Rechazado")
   - El analista añade observaciones, si es necesario
5. **Si el pedido es aceptado**:
   - **Actualizar el stock de equipos**:
     - Restar la cantidad pedida del stock de cada equipo asociado al pedido
   - **Actualizar la línea de crédito del cliente**:
     - Restar el monto total del pedido del crédito disponible del cliente
   - **Generar factura**:
     - Crear una factura asociada al pedido con su monto total
6. **Fin**


# Módulo  - "Evaluación y Liberación de Recargas"

1. **Inicio**

2. **Mostrar todos los pedidos de recargas pendientes**

- Obtener todos los pedidos de recargas con estado "Pendiente".
- Mostrar los detalles de cada pedido, incluyendo el cliente, el monto solicitado, la fecha de solicitud y su crédito disponible.
3. **Analista selecciona un pedido**

- El analista revisa el pedido seleccionado y los datos del cliente asociados, como su historial de pagos y deuda vencida.
4. **Evaluación del pedido**

- Verificar si el cliente tiene suficiente crédito disponible para cubrir el monto solicitado.

5. **Actualización del estado del pedido**

- Si el pedido no cumple los criterios (por ejemplo, deuda vencida o falta de crédito), el analista lo rechaza y añade observaciones.
- Si el pedido cumple los criterios, el analista lo aprueba para continuar con el siguiente paso.
- Si el pedido es aprobado:

   - Actualizar el crédito disponible del cliente:
      - Restar el monto solicitado del crédito disponible del cliente.
   - Generar factura:
      - Crear una factura asociada al pedido de recarga con el monto aprobado.
   - Notificar al cliente:

      - Enviar una notificación al cliente informando que su pedido ha sido aprobado y recargado exitosamente.

6. **Si el pedido es rechazado:**

- Registrar el rechazo en el sistema con las observaciones del analista.
- Notificar al cliente sobre el rechazo y detallar las razones, como deuda vencida o falta de crédito.

7. **Fin**